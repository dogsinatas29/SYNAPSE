# 👻 SYNAPSE: Ghost Nodes (고스트 노드) 가이드

고스트 노드(Ghost Node)는 **소스 코드 상에서 `import`나 `require` 등으로 참조하고 있지만, 프로젝트 폴더 내에 실제 물리적인 파일이 존재하지 않는 외부 모듈이나 라이브러리**를 시각화하기 위한 특수한 노드입니다.

## 🌟 핵심 동작 규칙 (v0.2.18 기준)

현행 시스템은 복잡한 의존성 그래프의 가독성을 유지하기 위해 고스트 노드를 다음과 같은 원칙으로 제어합니다:

### 1. 스마트 필터링 (Smart Ghost Filtering)
과도한 고스트 노드 생성을 막기 위해, 흔히 쓰이는 기본 내장 모듈이나 유명 외부 라이브러리는 분석 및 시각화 대상에서 아예 제외(블랙리스트 기반 차단)합니다.
- **제외 대상 예시**: 
  - Python: `os`, `sys`, `math`, `pandas`, `numpy`, `rich`, `datetime`, `json`, `time`, `re`, `unittest`
  - JavaScript/TypeScript: `path`, `fs`, `vscode`, `react`

### 2. 충돌 방지 포지셔닝 (Overlap Prevention)
고스트 노드가 캔버스 상에 렌더링될 때 서로 겹쳐서 식별이 불가능해지는 현상을 방지합니다.
- 고스트 노드는 원본 소스 노드(해당 모듈을 import한 노드)의 위치를 기준으로 **나선형(Spiral) 궤도의 오프셋(Offset)**을 계산하여 일정 거리와 각도를 두고 점진적으로 배치됩니다.

### 3. 자동 확정 엣지 (Auto-Confirmed Edges)
일반적으로 노드 간의 엣지를 연결하면 사용자의 승인을 대기하는 불확실성(`?` 배지) 상태로 시작하지만, 자동 발견된 고스트 노드 에지는 다릅니다.
- 코드 파싱(AST/정규식)을 통해 발견된 명명백백한 `import` 관계이므로, **승인 다이얼로그나 대기 상태 없이 시스템에 의해 즉시 확정(`!` 배지, `dtr: 0`)** 상태로 캔버스에 그려집니다.

### 4. 시각적 형태 (Visual Representation)
이것이 물리적 파일이 아니라는 것을 사용자가 직관적으로 알 수 있도록 디자인되었습니다.
- **테두리**: 점선 (`borderStyle: 'dashed'`)
- **투명도**: 반투명 (`opacity: 0.6`)
- **컬러**: 외부 모듈(External)을 상징하는 **블루 컬러 (`#83a598`)** 계열로 렌더링되며, 텍스트 라벨 양옆에 `[[ ]]` 기호가 붙어 다릅니다.

---
> **Tip**: 만약 시각화 분석 과정에서 너무 많은 불필요한 라이브러리가 고스트 노드로 떠서 방해된다면, 내부 파서 시스템의 `IGNORE_GHOST_TARGETS` 화이트리스트 변수에 모듈 이름을 추가해 완전히 차단할 수 있습니다.
