# <img src="resources/synapse-icon.png" width="40" height="40" /> SYNAPSE: 비주얼 아키텍처 엔진

> **"눈에 보이는 것이 곧 LLM의 논리입니다."** — *AI를 위한 WYSIWYG 논리 설계 도구*

[![Version](https://img.shields.io/badge/version-v0.2.16-brightgreen.svg)
![Status](https://img.shields.io/badge/status-War_Room_Ready-orange.svg)
[![Language](https://img.shields.io/badge/Language-TypeScript-blue?style=flat-square)](https://www.typescriptlang.org/)
[![Platform](https://img.shields.io/badge/Platform-VS_Code-007ACC?style=flat-square)](https://code.visualstudio.com/)

[🇺🇸 English Version](README.md) | [🇰🇷 한국어 버전](README.ko.md)

---

**SYNAPSE**는 **Google Antigravity**와 **VS Code** 사용자를 위한 차세대 시각적 제어 센터입니다. 대규모 언어 모델(LLM)의 추론 과정과 실제 코드 아키텍처 사이의 간극을 메워, 추상적인 논리를 고성능의 인터랙티브 노드-에지 네트워크로 변환합니다.

## 🌟 다중 언어 지능 (v0.2.11 신규 기능)

SYNAPSE는 이제 사용하는 언어에 관계없이 프로젝트의 깊은 의미를 이해하는 통합 스캐닝 엔진을 탑재했습니다.

| 언어 | 고급 해석 엔진 | 로직 플로우 분석 | 최적의 용도 |
| :--- | :---: | :---: | :--- |
| 🐍 **Python** | 심층 임포트 해석 | 전체 지원 | 웹, 데이터 과학, AI |
| 🦀 **Rust** | Crate/Super/Self | `match` 및 에러 핸들링 | 시스템, 고성능 엔진 |
| 🇨 **C / C++** | 로컬 vs 시스템 헤더 | 제어 구조 분석 | 레거시, 성능 최적화, 임베디드 |
| 📜 **JS / TS** | Async/Types | 전체 지원 | 웹, 확장 프로그램, 툴링 |

---

## 🚀 핵심 기능

### 🌐 토폴로지 뷰 (아키텍처 맵)
프로젝트의 폴더 구조와 파일 의존성을 네트워크 형태로 시각화합니다.
- **Node Diet**: 빌드 결과물, 모듈 폴더 등 불필요한 노이즈를 자동으로 필터링합니다.
- **Ghost Node Storage**: 연결되지 않은 컴포넌트들을 별도 클러스터로 격리하여 캔버스를 깨끗하게 유지합니다.
- **Rule Engine**: `RULES.md`를 통해 일관된 발견 규칙과 아이콘 표준을 적용합니다.

### ➡️ 플로우 뷰 (로직 실행 흐름)
복잡한 실행 흐름을 직관적인 순서도로 투영합니다.
- **지능형 분기 감지**: `if/else`, 루프, `try/catch` 등을 높은 정밀도로 포착합니다.
- **Rust 패턴 지원**: Rust 고유의 `match` 식과 에러 처리 패턴을 완벽하게 시각화합니다.
- **권위 있는 결과**: 수동 설계 결정과 실제 소스 코드 로직을 결합하여 최종 결과물을 도출합니다.

### 🔗 엣지 확정 워크플로 (Source Code Sync)
SYNAPSE는 **"소스 불변의 원칙(Safety First)"**을 기반으로 위지윅 편집을 지원합니다.
- **안전한 삭제**: 기본 모드(View Mode)에서 캔버스의 엣지를 삭제해도 **실제 소스 코드는 절대 변경되지 않습니다.** (시각적 상태만 정리됨)
- **명시적 확정 (2-Step Verification)**:
  1. 수동으로 노드를 연결하면 엣지 중앙에 노란색 **`?` (보류)** 배지가 생성됩니다.
  2. `?` 배지를 클릭하면 소스 반영 경고창이 뜨며, **승인 시에만** 실제 파일에 `import` 구문이 주입됩니다.
  3. 확정된 엣지는 초록색 **`!` (완료)** 배지로 바뀌며, 언제든 클릭하여 반영 상태를 알 수 있습니다.

### 🔓 논리 편집 모드 (Logic Edit Mode)
진정한 위지윅(WYSIWYG) 파괴적 편집이 필요하다면 상단 툴바의 **`Edit Logic`** 버튼을 활성화하세요.
- **위험 구역 표시**: 캔버스 전체에 붉은색 네온 외곽선이 켜집니다.
- **소스 동기화 파괴 (엣지)**: 이 모드에서 엣지를 **삭제(Delete)**하면, 해당 연결 정보를 담고 있던 실제 대상 소스 파일의 **`import` 구문까지 완전히 자동 삭제**됩니다.
- **물리적 파일 파괴 (노드)**: 이 모드에서 노드를 **삭제(Delete)**하면, 워크스페이스 내의 **실제 파일이 물리적으로 삭제**됩니다.
  - 삭제를 시도할 때 항상 최종 경고창이 뜨며 방어적인 UX를 유지합니다.
  - 노드를 파괴적으로 삭제하기 직전, 시스템이 자동으로 현재 모든 소스 파일의 코드를 백업하는 **안전 스냅샷(Safety Snapshot)**을 먼저 촬영합니다.
  - 실수로 파일을 지웠더라도 백업된 스냅샷으로 롤백하면 **물리적 파일이 하드디스크에 원상복구(Resurrect)**됩니다.

### 🧠 지능형 컨텍스트 보관소 (Intelligent Context Vault)
- **무중단 컨텍스트 캡처 (`Ctrl+Alt+M`)**: 레코딩 시작(`REC`) 시 백그라운드에서 최근 VS Code AI 채팅(예: GitHub Copilot) 세션을 팝업 없이 자동으로 추적합니다. 코딩 완료 후 다시 버튼을 누르면, **[AI와 나눈 질답 + 실제 수정된 소스코드 Git Diff]**가 완벽한 마크다운 문서로 자동 병합/기록됩니다.
- **시맨틱 줌 (LOD)**: 수천 개의 노드도 성능 저하 없이 부드럽게 탐색할 수 있는 단계별 상세도 제어 기능을 제공합니다.
- **지속성(Persistence)**: 모든 시각적 상태를 Git 친화적인 `project_state.json`에 영구적으로 저장합니다.

---

## 📸 시각적 개요

### 프로젝트 토폴로지 (Topology)
LLM 추론 논리와 소스 파일 간의 물리적 연결 상태를 시각화합니다.
![Topology View](./assets/v0.2.16/synapse_graph_v0.2.16.png)

### 논리 흐름 (Flow)
코드 변경 사항과 수동 편집 사항이 모두 반영된 논리 실행 흐름도입니다. 그룹 기반 계층화와 직교 라우팅을 통해 얽힘 없는 깔끔한 로직을 제공합니다.
![Flow View](./assets/v0.2.16/synapse_flow_v0.2.16.png)

### 계층 구조 (Tree)
프로젝트 구조를 한눈에 파악할 수 있는 체계적인 트리 뷰를 제공합니다.
![Tree View](./assets/v0.2.16/synapse_tree_v0.2.16.png)

---

## 🛠️ 설치 방법

1. [Releases](https://github.com/dogsinatas29/SYNAPSE/releases) 페이지에서 최신 `.vsix` 파일을 다운로드합니다.
2. 파일을 **VS Code** 창으로 드래그 앤 드롭합니다.
3. 또는 터미널에서 다음 명령어를 입력합니다:### 빠른 설치
# 🧠 SYNAPSE: Visual Architecture Engine (v0.2.17)
```bash
code --install-extension synapse-visual-architecture-0.2.17.vsix
```
현재 버전: **v0.2.17** (DTR - 사고의 공명)

---

## 🆕 버전 히스토리

### v0.2.16 (Strategic Execution Flow 업데이트)
- **Ready Handshake**: Extension이 WebView의 준비 상태를 대기한 후 데이터를 전송하여 초기화 타이밍 문제를 해결했습니다.
- **Stable Layout BFS**: 무한 루프 위험이 있는 BFS 로직을 안정적인 위상 정렬 기반 랭크 계산법으로 교체했습니다.
- **NaN/Infinity 가드**: 복잡한 그래프에서 좌표가 잘못 계산되어 UI가 멈추는 현상을 방지하기 위해 엄격한 좌표 검증 로직을 추가했습니다.
- **메시지 통신 최적화**: 진행률 업데이트 빈도를 조절하고 메시지를 일괄 처리하여 UI 성능을 대폭 개선했습니다.
- **재귀 Depth 제한**: 매우 복잡하거나 순환 참조가 있는 프로젝트에서도 안정적으로 분석을 마칠 수 있도록 계산 깊이 제한을 적용했습니다.

### v0.2.15 (성능 및 가시성 업데이트)
- **노드 좌표 드리프트 해결**: 렌더링 엔진의 `save/restore` 불균형 문제를 수정하여, 줌 레벨에 관계없이 노드 라벨과 아이콘이 항상 정확한 위치에 표시됩니다.
- **CPU 점유율 최적화**: 활성 경로(호버/선택된 노드)에만 그림자 효과를 적용하여 렌더링 부하를 획기적으로 낮췄습니다.
- **전 모드 호버 지원**: Graph 모드뿐만 아니라 Flow, Tree 모드에서도 마우스 호버 시 경로 하이라이팅 기능이 대등하게 작동합니다.
- **비선형 플로우 스캐닝**: `if`, `loop`, `try/except` 등 분기 로직을 인식하여 실제 논리 구조를 반영한 순서도를 생성합니다.

### v0.2.14fix (명확성 업데이트)
- **논리적 클러스터 보존 (Group-Aware Hierarchy)**: Flow 뷰의 노드들이 Graph 뷰에서 할당된 `cluster_id`를 유지하며 시각적 바운딩 박스(`[ MODULES ]`)로 묶여 렌더링됩니다.
- **맨해튼 라우팅 & 회피 기동 (Orthogonal Routing)**: 무차별적으로 노드를 관통하던 대각선 스파게티 선들을 제거하고 90도로 꺾여 우회하는 스마트 직교 라우팅을 도입했습니다.
- **가상 버스 터미널 (Virtual End-Point Bus)**: 하단의 `END` 노드로 모이는 수많은 로직들을 하나로 통합해주는 `Merge / Sync` 가상 노드를 추가하여 과밀화(병목) 현상을 해소했습니다.
- **결정 노드 비율 보정 (Decision Node Resizing)**: 주변 형제 노드를 침범하던 거대한 마름모 노드 텍스트의 좌우폭을 날씬하게 줄여 간격을 확보했습니다.

### v0.2.14
- **💎 순서도 기하학 도형 반영**: Graph View의 노드들이 의미론적 로직에 기반하여 표준 순서도 도형으로 렌더링됩니다 (`if/valid_`는 다이아몬드, `for/loop`는 육각형, `print`는 평행사변형).
- **🛡️ 작전 지휘소(War Room) 엔진 도입**: SYNAPSE를 기술 감사 및 진단 센터로 변모시킵니다.
- **로직 분석기(Logic Analyzer)**: 순환 의존성, 병목 지점, 논리 단절을 자동으로 탐지합니다.
- **실시간 펄스 애니메이션**: 로직의 전파 가시성(Reachability)을 가시화하는 입자 효과를 지원합니다.
- **인터랙티브 리포트**: `리포트.md`의 탐지 항목 클릭 시 캔버스가 해당 노드로 즉시 자동 포커싱됩니다.

### v0.2.13
- **🌟 클러스터 UX 전면 개편**: 캔버스 상호작용이 획기적으로 개선되었습니다.
- **드래그 앤 드롭**: 이제 전체 클러스터를 상단 헤더 블록을 잡고 부드럽게 끌어서 이동할 수 있습니다.
- **내부 노드 일괄 선택**: 클러스터를 실수로 드래그하지 않고도, 내부 빈 공간에 다중 선택 박스를 그려 특정 노드들을 손쉽게 선택 가능합니다.
- **Gruvbox 색상 지원**: 식별성 강화를 위해 모든 클러스터에 고유 ID 해시값을 적용하여 일관된 개별 색상(Gruvbox Palette)을 자동 부여합니다.

### v0.2.12
- **🧠 지능형 컨텍스트 보관소**: 팝업창 및 수동 복사/붙여넣기 없이, VS Code Copilot 채팅 기록을 캔버스 기록(`context.md`)으로 자동 추출합니다.
- **Zero-Click 워크플로 맵핑**: `Ctrl+Alt+M` 누르면 알아서 최신 대화록과 Git Diff를 병합하여 마크다운 문서 생성.

### v0.2.17: DTR - 사고의 공명 (2025-05-15)
- **DTR (Deep-Thinking Ratio)**: AI 사고의 깊이를 보라색 발광(Glow) 효과로 시각화.
- **추론 압력 게이지**: 에디터 상태바에서 실시간으로 AI 사고 깊이 모니터링 및 제어.
- **논리적 긴장감**: DTR 수치에 따라 연결선(Edge)의 두께가 동적으로 변화.
- **모든 상태 변화 자동 백업(Auto-Snapshot)**: 노드 삭제, 노드/엣지 이동 등 어떠한 변경이라도 즉시 캔버스 상태를 캡처하여 최상위 스냅샷으로 덮어씁니다. 이를 통해 좀비 파일(고스트 노드)이나 삭제된 엣지가 과거 캐시에 의해 다시 살아나는 현상을 원천 방지합니다.
- **캔버스 내비게이션**: 대규모 프로젝트 탐색을 위한 전용 스크롤바 추가.

### v0.2.11
- **✨ 다중 언어 지능화**: Python, C/C++, Rust를 위한 정교한 스캐닝 지원.
- **고급 해석 엔진**: 모든 주요 언어의 내부 경로 추적 기능 강화.
- **통합 플로우 뷰**: C/C++ 및 Rust의 로직 실행 시각화 지원 추가.

### v0.2.10
- **🐛 중요 수정**: 활성화 오류 해결 및 다중 노드 삭제 안정성 개선.

---

## 📜 라이선스 및 제작자
본 프로젝트는 [GNU General Public License v3.0](LICENSE) 라이선스를 따릅니다.  
[dogsinatas29](https://github.com/dogsinatas29)가 🧠와 정성을 담아 제작했습니다.
